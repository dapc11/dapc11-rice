#!/bin/sh

# This file runs when a DM logs you into a graphical session.
# If you use startx/xinit like a Chad, this file will also be sourced.


function __volume {
	echo " $(amixer get Master | grep -o '\[[0-9]\+%\]' | sed 's/[^0-9]*//g;1q')"
}

function __battery {
	echo "  $(cat /sys/class/power_supply/BAT0/capacity)%"
}

function __date {
	echo "$(date +%F\ %T\ %Z)"
}

# Fix Gnome Apps Slow  Start due to failing services
# Add this when you include flatpak in your system
dbus-update-activation-environment --systemd DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY

fix_resolution &
feh --bg-fill ~/.local/share/bg &
xrdb -merge $HOME/.Xresources &	# Uncomment to use Xresources colors/settings on startup
xcompmgr &		# xcompmgr for transparency
xsetkbmap se & 		# set keyboard layout to swedish
xset r rate 300 50 &	# Speed xrate up
unclutter &		# Remove mouse when idle

# Statusbar
while true; do
	xsetroot -name "| $(__volume) | $(__battery) | $(__date)"
        sleep 1s
done &
